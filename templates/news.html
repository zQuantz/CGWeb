<!DOCTYPE html>
<html>
<head>

	<title>Market News</title>

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type="text/javascript">
		var ajax = $.ajax;
	</script>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	<!-- Bootstrap End -->

	<!-- Bootstrap Select -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
	<!-- Bootstrap Select End -->

	<!-- Custom -->
	<link rel="stylesheet" type="text/css" href="/static/css/news/news.css">
	<script type="text/javascript" src="/static/js/news/news.js"></script>
	<!-- Custom End -->

</head>
<body>

	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		
		<a class="navbar-brand" href="#">CG</a>

		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarNav">
			
			<ul class="navbar-nav">
				
<!-- 				<li class="nav-item">
					<a class="nav-link" href="/monitor">Monitor</a>
				</li>

				<li class="nav-item">
					<a class="nav-link" href="/builder">Builder</a>
				</li> -->
				
				<li class="nav-item">
					<a class="nav-link" href="/calculator">Greek Calculator</a>
				</li>
				
<!-- 				<li class="nav-item">
					<a class="nav-link" href="/scenarios">Scenario Analysis</a>
				</li>

				<li class="nav-item">
					<a class="nav-link" href="/iv">IV</a>
				</li> -->

				<li class="nav-item">
					<a class="nav-link active" href="/news">News</a>
				</li>

<!-- 				<li class="nav-item">
					<a class="nav-link" href="/surface">Surface</a>
				</li>

				<li class="nav-item">
					<a class="nav-link" href="/density">Density</a>
				</li> -->

			</ul>

			<ul class="navbar-nav ml-auto">
					
					<input type="text" name="searchString" form="parameterForm" class="btn btn-outline-light" placeholder="Search..." style="width: 10rem; border-radius: 0" id="searchStringInput">
					<button id="parameterPopover" type="button" class="btn btn-outline-light" data-container="body" data-toggle="popover" data-placement="left" style="width: 10rem; border-radius: 0; margin-left: 1rem">
						Parameters
					</button>
					<button type="submit" form="parameterForm" class="btn btn-outline-light" style="width: 10rem; border-radius: 0; margin-left: 1rem">
						Search
					</button>

			</ul>

		</div>

	</nav>
	<!-- Navbar End -->

	<!-- Main Container -->
	<div class="container-fluid" style="width: 99%; margin-top: 0.5rem; margin-bottom: 1rem;">

		<!-- Main Row -->
		<div class="row">
			
			<div class="col-6">
				
				<h5>News</h5>

				<!-- News Accordion -->
				<div class="accordion" id="newsAccordion">

					{% if cards.news %}
						{{ cards.news | safe }}
					{% endif %}

				</div>
				<!-- News Accordion End -->

			</div>

			<div class="col-6">
				
				<h5>Tweets</h5>

				<!-- Tweets Accordion -->
				<div class="accordion" id="tweetsAccordion">

					{% if cards.tweets %}
						{{ cards.tweets | safe }}
					{% endif %}

				</div>
				<!-- Tweets Accordion End -->

			</div>

		</div>
		<!-- Main Row End -->

	</div>
	<!-- Main Container End -->

	<div id="parameterFormDiv" hidden>

		<form action="/news" method="get" id="parameterForm">	

			<div class="container-fluid" style="width: 50rem; padding-right: 3rem;">

				<div class="form-group row">

					<label for="tickersInput" class="col-2 col-form-label">Tickers</label>
					<div class="col-4">
						<input type="input" name="tickers" id="tickersInput">
					</div>

					<label for="authorsInput" class="col-2 col-form-label">Authors</label>
					<div class="col-4">
						<input type="input" name="authors" id="authorsInput">
					</div>

				</div>

				<div class="form-group row">

					<label for="startDateInput" class="col-2 col-form-label">Start Date</label>
					<div class="col-4">
						<input type="datetime-local" name="startDate" id="startDateInput">
					</div>

					<label for="endDateInput" class="col-2 col-form-label">End Date</label>
					<div class="col-4">
						<input type="datetime-local" name="endDate" id="endDateInput">
					</div>

				</div>

				<div class="form-group row">

					<label for="sentimentInput" class="col-2 col-form-label">Sentiment</label>
					<div class="col-4">
						<input type="input" name="sentiment" id="sentimentInput">
					</div>

					<label for="sizeInput" class="col-2 col-form-label">Size</label>
					<div class="col-4">
						<input type="input" name="size" id="sizeInput">
					</div>

				</div>

				<div class="form-group row">

					<label for="likesInput" class="col-2 col-form-label">Likes</label>
					<div class="col-4">
						<input type="input" name="likes" id="likesInput">
					</div>

					<label for="hashtagsInput" class="col-2 col-form-label">Hashtags</label>
					<div class="col-4">
						<input type="input" name="hashtags" id="hashtagsInput">
					</div>

				</div>

			</div>

		</form>

	</div>

	<script type="text/javascript">

		$('#parameterPopover').popover({
		  content: $("#parameterFormDiv > form"),
		  html: true
		});

		$("#searchStringInput").val("{{news.html_params.searchString}}").change()
		$("#tickersInput").val("{{news.html_params.tickers}}").change()
		$("#authorsInput").val("{{news.html_params.authors}}").change()

		$("#startDateInput").val("{{news.html_params.startDate}}").change()
		$("#endDateInput").val("{{news.html_params.endDate}}").change()
		
		let sent = "{{news.html_params.sentiment}}"
		sent = sent.replace("&gt;", ">").replace("&lt;", "<")
		$("#sentimentInput").val(sent).change()

		$("#likesInput").val("{{news.html_params.likes}}").change()
		$("#hashtagsInput").val("{{news.html_params.hashtags}}").change()
		$("#sizeInput").val("{{news.html_params.size}}").change()

		init({{news.params | safe}}, {{hashs | safe}})

	</script>

</body>
</html>